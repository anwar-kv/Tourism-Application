"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[877],{1877:(G,b,r)=>{r.r(b),r.d(b,{TripplanModule:()=>u});var s=r(433),d=r(4166),y=r(1135),t=r(1571),T=r(2340),A=r(529);class c{constructor(i){this.http=i,this.baseUrl=T.N.baseApiUrl,this.sharedTripPlanMode="ADD",this.sharedActivityMode="ADD"}GetTripplans(){return this.http.get(this.baseUrl+"Tripplan/tripplans?cityId=0&maxbudget=0&members=1")}GetActivities(i){return this.http.get(this.baseUrl+"Tripplan/activities?tripplanId="+i)}DeleteTripPlan(i){return this.http.post(this.baseUrl+"TripPlan/delete-tripplan?tId="+i,"")}DeleteActivity(i){return this.http.post(this.baseUrl+"TripPlan/delete-activity?aId="+i,"")}InsertTripPlans(i){var e=JSON.parse(JSON.stringify(i));return console.log("insert plan "+JSON.stringify(i)),this.http.post(this.baseUrl+"TripPlan/insert-tripplan",e)}InsertActivity(i){var e=JSON.parse(JSON.stringify(i));return console.log("insert activity "+JSON.stringify(i)),console.log(this.baseUrl+"Tripplan/insert-activity",e),this.http.post(this.baseUrl+"Tripplan/insert-activity",e)}}c.\u0275fac=function(i){return new(i||c)(t.LFG(A.eN))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"});var l=r(6895);function Z(n,i){if(1&n&&(t.TgZ(0,"option",18),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function C(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",20)(10,"button",21),t.NdJ("click",function(){const p=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.edit(p.id))}),t._uU(11,"Edit"),t.qZA(),t.TgZ(12,"button",22),t.NdJ("click",function(){const p=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.delete(p.id))}),t._uU(13,"Delete"),t.qZA()()()}if(2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(e.day),t.xp6(2),t.Oqu(e.time)}}function O(n,i){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,C,14,4,"tr",19),t.ALo(2,"async"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.activitiesList))}}function q(n,i){1&n&&(t.TgZ(0,"div",23)(1,"div",7),t._UZ(2,"img",24),t.qZA()())}function M(n,i){1&n&&(t.TgZ(0,"div")(1,"div",25),t._UZ(2,"span",26),t.qZA()())}class h{constructor(i,e){this.tripplanService=i,this.router=e,this.activitiesList=new y.X([]),this.showStatusMessage=!1,this.activitiesLength=0,this.showSpinner=!1}ngOnInit(){this.getTripPlans()}getTripPlans(){this.tripplanService.GetTripplans().subscribe(i=>{null!=i?(console.log("trip plans fetched"),console.log(i),this.tripPlansList=i):console.log("no data")})}getActivities(){this.showSpinner=!0,this.tripplanService.GetActivities(this.tripPlanId).subscribe(i=>{null!=i?(this.activitiesLength=i.length,this.activitiesList.next([...i]),this.showSpinner=!1):console.log("no data")})}addActivity(){this.tripplanService.sharedActivityMode="ADD",this.router.navigateByUrl("tripplans/activity")}edit(i){var e;e=this.activitiesList.value.filter(o=>o.id===i)[0],this.tripplanService.sharedActivityObject=e,this.tripplanService.sharedActivityMode="EDIT",this.router.navigateByUrl("tripplans/activity")}delete(i){this.showSpinner=!0,console.log("delete clicked",i),this.tripplanService.DeleteActivity(i).subscribe(e=>{this.getActivities()},e=>{this.showSpinner=!0,console.log(e)})}}h.\u0275fac=function(i){return new(i||h)(t.Y36(c),t.Y36(d.F0))},h.\u0275cmp=t.Xpm({type:h,selectors:[["ng-component"]],decls:42,vars:5,consts:[[1,"animated","fadeIn","pb-4"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"d-flex","justify-content-between"],["type","submit",1,"btn","btn-primary","btn-block","ms-3",3,"click"],[1,"col-md-3"],[1,"form-group"],["id","tripplan-select","name","tripplansList","required","",1,"custom-select",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["name","modelForm"],["modelForm","ngForm"],[1,"table-responsive-sm"],[1,"table"],[4,"ngIf"],["class","row justify-content-center mt-2",4,"ngIf"],[1,"d-flex","justify-content-center"],[3,"value"],[4,"ngFor","ngForOf"],[2,"text-align","end"],["type","button",1,"btn","btn-primary","me-4",3,"click"],["type","button",1,"btn","btn-sm","btn-danger",3,"click"],[1,"row","justify-content-center","mt-2"],["src","/assets/img/empty-cart.svg",1,"img-fluid","text-center",2,"width","150px"],["role","status",1,"spinner-border"],["id","loading",1,"sr-only"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div")(7,"h5"),t._uU(8,"Activities "),t.qZA()(),t.TgZ(9,"div")(10,"a")(11,"button",6),t.NdJ("click",function(){return e.addActivity()}),t._uU(12," + Add New"),t.qZA()()()(),t.TgZ(13,"div",1)(14,"div",7)(15,"div",8)(16,"h6"),t._uU(17,"Choose Trip Plan"),t.qZA(),t.TgZ(18,"label")(19,"select",9),t.NdJ("ngModelChange",function(a){return e.tripPlanId=a})("change",function(){return e.getActivities()}),t.YNc(20,Z,2,2,"option",10),t.qZA()()()()(),t.TgZ(21,"form",11,12)(23,"div",13)(24,"table",14)(25,"thead")(26,"tr")(27,"th"),t._uU(28,"Name"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Description"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Day"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"Time"),t.qZA(),t._UZ(35,"th"),t.qZA()(),t.YNc(36,O,3,3,"tbody",15),t.qZA(),t.YNc(37,q,3,0,"div",16),t.TgZ(38,"div",1)(39,"div",2)(40,"div",17),t.YNc(41,M,3,0,"div",15),t.qZA()()()()()()()()()()),2&i&&(t.xp6(19),t.Q6J("ngModel",e.tripPlanId),t.xp6(1),t.Q6J("ngForOf",e.tripPlansList),t.xp6(16),t.Q6J("ngIf",0==e.showSpinner),t.xp6(1),t.Q6J("ngIf",0==e.activitiesLength),t.xp6(4),t.Q6J("ngIf",1==e.showSpinner))},dependencies:[s._Y,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.Q7,s.On,s.F,l.sg,l.O5,l.Ov],encapsulation:2});var I=r(4655);const j=["fileInput"];function P(n,i){if(1&n&&(t.TgZ(0,"option",35),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function J(n,i){if(1&n&&(t.TgZ(0,"option",35),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function U(n,i){if(1&n&&(t.TgZ(0,"option",35),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function S(n,i){if(1&n&&(t.TgZ(0,"option",35),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function x(n,i){if(1&n&&(t.TgZ(0,"div",36),t._UZ(1,"img",37),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("src",e.activityImage,t.LSH)}}function F(n,i){1&n&&(t.TgZ(0,"div",38),t._uU(1," Saved successfully! "),t.qZA())}class v{constructor(i,e,o){this.categoryService=i,this.tripplanService=e,this.router=o,this.showStatusMessage=!1,this.base64textString="",this.activitysuccessflag=!1,this.activityMode=""}ngOnInit(){this.getCategories(),this.getTripplans(),this.activityObject=this.tripplanService.sharedActivityObject,null==this.activityObject&&(this.activityObject={id:0,name:"",categoryId:0,description:"",day:0,time:(new Date).getHours(),tripplanId:0,itemId:0,tagId:0,image:""}),this.activityMode=this.tripplanService.sharedActivityMode,"ADD"==this.activityMode?this.clearFields():this.activityImage=T.N.baseUrl+"Resources/images/"+this.activityObject.image,this.getFunctions()}getCategories(){this.categoryService.GetCategories().subscribe(i=>{null!=i?this.CatsList=i:console.log("no data")})}getTripplans(){this.tripplanService.GetTripplans().subscribe(i=>{null!=i?(this.TripsList=i,console.log("tripName 1--",this.TripsList[0].name)):console.log("no data")})}getFunctions(){this.getItems(),this.getTags()}getItems(){this.categoryService.GetItemsList(this.activityObject.categoryId).subscribe(i=>{null!=i?(this.ItemsList=i,console.log("itemName 1--",this.ItemsList[0].name)):console.log("no data")})}getTags(){this.categoryService.GetTags(this.activityObject.categoryId).subscribe(i=>{null!=i?(this.TagsList=i,console.log("tagName 1--",this.TagsList[0].name)):console.log("no data")})}AddActivity(){let i;i={id:this.activityObject.id,name:this.activityObject.name,description:this.activityObject.description,day:this.activityObject.day,time:this.activityObject.time,tripplanId:this.activityObject.tripplanId,categoryId:this.activityObject.categoryId,itemId:this.activityObject.itemId,tagId:this.activityObject.tagId,image:this.base64textString},console.log("activity:-- "+JSON.stringify(i)),this.tripplanService.InsertActivity(i).subscribe(e=>{console.log("2"),console.log(e),this.showStatusMessage=!0},e=>{console.log(e)}),console.log("3"),this.activitysuccessflag=!0,"ADD"==this.activityMode&&this.clearFields()}clearFields(){this.activityObject.id=0,this.activityObject.name="",this.activityObject.description="",this.activityObject.day=0,this.activityObject.time=0,this.activityObject.tripplanId=0,this.activityObject.categoryId=0,this.activityObject.itemId=0,this.activityObject.tagId=0,this.InputVar.nativeElement.value=""}onFileChanges(i){if(this.selectedFile=i.target.files[0],console.log("selected file:"+i.target.files[0]),this.selectedFile){var e=new FileReader;e.onload=this._handleReaderLoaded.bind(this),e.readAsBinaryString(this.selectedFile)}}_handleReaderLoaded(i){var e=i.target.result;this.base64textString=btoa(e)}}function w(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",14)(8,"button",15),t.NdJ("click",function(){const p=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.edit(p.id))}),t._uU(9,"Edit"),t.qZA(),t.TgZ(10,"button",16),t.NdJ("click",function(){const p=t.CHM(e).$implicit,g=t.oxw(2);return t.KtG(g.delete(p.id))}),t._uU(11,"Delete"),t.qZA()()()}if(2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(e.cost)}}function N(n,i){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,w,12,3,"tr",13),t.ALo(2,"async"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e.tripPlansList))}}function Q(n,i){1&n&&(t.TgZ(0,"div")(1,"div",17),t._UZ(2,"span",18),t.qZA()())}v.\u0275fac=function(i){return new(i||v)(t.Y36(I.H),t.Y36(c),t.Y36(d.F0))},v.\u0275cmp=t.Xpm({type:v,selectors:[["ng-component"]],viewQuery:function(i,e){if(1&i&&t.Gf(j,5),2&i){let o;t.iGM(o=t.CRH())&&(e.InputVar=o.first)}},decls:88,vars:14,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],["name","modelForm"],["modelForm","ngForm"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12"],[1,"card"],[1,"card-body"],[1,"form-group","mb-3"],[1,"mt-2","col-md-12"],["id","activity-input","name","activityname","required","","rows","1","placeholder","Enter activity name",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","d-flex"],["id","tag-input","name","description","required","","rows","1","placeholder","Enter description",1,"form-control",3,"ngModel","ngModelChange"],["id","tag-input","name","day","required","","rows","1","placeholder","Enter the day of activity",1,"form-control",3,"ngModel","ngModelChange"],["id","tag-input","name","time","required","","rows","1","placeholder","Enter the time of activity",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-3"],[1,"mt-2"],["id","tripplan-select","name","tripplanlist","required","",1,"custom-select","form-control-sm",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["id","category-select","name","categorylist","required","",1,"custom-select","form-control-sm",3,"ngModel","ngModelChange","change"],["id","item-select","name","itemlist","required","",1,"custom-select","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-group"],["id","tag-select","name","taglist","required","",1,"custom-select","form-control-sm",3,"ngModel","ngModelChange"],[1,"row","pb-4"],[1,"col-md-4"],[1,"input-group"],[1,"custom-file"],["type","file","accept","image","id","fileInput",1,"form-control",3,"change"],["fileInput",""],["class","img-preview p-2",4,"ngIf"],[1,"row","qa-upload","justify-content-end"],[1,"d-flex","justify-content-end"],["type","button","routerLink","/tripplans/activities",1,"btn","px-12","me-3","btn-light","btn-block"],["type","button",1,"btn","btn-primary","px-5","btn-block",3,"click"],["class","alert alert-success mt-3","role","alert",4,"ngIf"],[3,"value"],[1,"img-preview","p-2"],[1,"img-fluid",3,"src"],["role","alert",1,"alert","alert-success","mt-3"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),t._uU(4,"Activity"),t.qZA(),t._UZ(5,"p"),t.qZA()(),t.TgZ(6,"form",3,4)(8,"div",1)(9,"div",5)(10,"div",6)(11,"div",7)(12,"h6"),t._uU(13,"Name"),t.qZA(),t.TgZ(14,"div",8)(15,"div",1)(16,"div",9)(17,"textarea",10),t.NdJ("ngModelChange",function(a){return e.activityObject.name=a}),t.qZA()()()(),t.TgZ(18,"h6"),t._uU(19,"Description"),t.qZA(),t.TgZ(20,"div",8)(21,"div",11)(22,"div",9)(23,"textarea",12),t.NdJ("ngModelChange",function(a){return e.activityObject.description=a}),t.qZA()()()(),t.TgZ(24,"h6"),t._uU(25,"Day"),t.qZA(),t.TgZ(26,"div",8)(27,"div",1)(28,"div",9)(29,"textarea",13),t.NdJ("ngModelChange",function(a){return e.activityObject.day=a}),t.qZA()()()(),t.TgZ(30,"h6"),t._uU(31,"Time"),t.qZA(),t.TgZ(32,"div",8)(33,"div",1)(34,"div",9)(35,"textarea",14),t.NdJ("ngModelChange",function(a){return e.activityObject.time=a}),t.qZA()()()(),t.TgZ(36,"div",1)(37,"div",15)(38,"div",8)(39,"div",16)(40,"label")(41,"h6"),t._uU(42,"Tripplan"),t.qZA(),t.TgZ(43,"select",17),t.NdJ("ngModelChange",function(a){return e.activityObject.tripplanId=a}),t.YNc(44,P,2,2,"option",18),t.qZA()()()()(),t.TgZ(45,"div",15)(46,"div",8)(47,"div",16)(48,"label")(49,"h6"),t._uU(50,"Category"),t.qZA(),t.TgZ(51,"select",19),t.NdJ("ngModelChange",function(a){return e.activityObject.categoryId=a})("change",function(){return e.getFunctions()}),t.YNc(52,J,2,2,"option",18),t.qZA()()()()(),t.TgZ(53,"div",15)(54,"div",8)(55,"div",16)(56,"label")(57,"h6"),t._uU(58,"Item"),t.qZA(),t.TgZ(59,"select",20),t.NdJ("ngModelChange",function(a){return e.activityObject.itemId=a}),t.YNc(60,U,2,2,"option",18),t.qZA()()()()(),t.TgZ(61,"div",15)(62,"div",21)(63,"div",16)(64,"label")(65,"h6"),t._uU(66,"Tag"),t.qZA(),t.TgZ(67,"select",22),t.NdJ("ngModelChange",function(a){return e.activityObject.tagId=a}),t.YNc(68,S,2,2,"option",18),t.qZA()()()()()(),t.TgZ(69,"div",23)(70,"div",24)(71,"h6"),t._uU(72,"Upload Image"),t.qZA(),t.TgZ(73,"div",25)(74,"div",26)(75,"input",27,28),t.NdJ("change",function(a){return e.onFileChanges(a)}),t.qZA()()(),t.TgZ(77,"small"),t._uU(78,"File Supprted : jpg,png"),t.qZA()(),t.TgZ(79,"div",15),t.YNc(80,x,2,1,"div",29),t.qZA()(),t.TgZ(81,"div",30)(82,"div",31)(83,"button",32),t._uU(84,"Back"),t.qZA(),t.TgZ(85,"button",33),t.NdJ("click",function(){return e.AddActivity()}),t._uU(86,"Save"),t.qZA()()(),t.YNc(87,F,2,0,"div",34),t.qZA()()()()()()),2&i&&(t.xp6(17),t.Q6J("ngModel",e.activityObject.name),t.xp6(6),t.Q6J("ngModel",e.activityObject.description),t.xp6(6),t.Q6J("ngModel",e.activityObject.day),t.xp6(6),t.Q6J("ngModel",e.activityObject.time),t.xp6(8),t.Q6J("ngModel",e.activityObject.tripplanId),t.xp6(1),t.Q6J("ngForOf",e.TripsList),t.xp6(7),t.Q6J("ngModel",e.activityObject.categoryId),t.xp6(1),t.Q6J("ngForOf",e.CatsList),t.xp6(7),t.Q6J("ngModel",e.activityObject.itemId),t.xp6(1),t.Q6J("ngForOf",e.ItemsList),t.xp6(7),t.Q6J("ngModel",e.activityObject.tagId),t.xp6(1),t.Q6J("ngForOf",e.TagsList),t.xp6(12),t.Q6J("ngIf","EDIT"==e.activityMode),t.xp6(7),t.Q6J("ngIf",1==e.activitysuccessflag))},dependencies:[s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.Q7,s.On,s.F,d.rH,l.sg,l.O5],encapsulation:2});class _{constructor(i,e){this.tripplanService=i,this.router=e,this.showStatusMessage=!1,this.tripPlansList=new y.X([]),this.showSpinner=!1}ngOnInit(){this.getTripPlans()}getTripPlans(){this.showSpinner=!0,this.tripplanService.GetTripplans().subscribe(i=>{null!=i?(console.log("trip plans fetched"),console.log(i),this.tripPlansList.next([...i]),this.showSpinner=!1):console.log("no data")})}addTripPlan(){this.tripplanService.sharedTripPlanMode="ADD",this.router.navigateByUrl("tripplans/tripplan")}edit(i){var e;e=this.tripPlansList.value.filter(o=>o.id===i)[0],console.log("selected trip plan:"+e),this.tripplanService.sharedTripPlanObject=e,this.tripplanService.sharedTripPlanMode="EDIT",this.router.navigateByUrl("tripplans/tripplan")}delete(i){this.showSpinner=!0,console.log("delete clicked",i),this.tripplanService.DeleteTripPlan(i).subscribe(e=>{this.getTripPlans()},e=>{this.showSpinner=!0,console.log(e)})}}_.\u0275fac=function(i){return new(i||_)(t.Y36(c),t.Y36(d.F0))},_.\u0275cmp=t.Xpm({type:_,selectors:[["ng-component"]],decls:31,vars:2,consts:[[1,"animated","fadeIn","pb-4"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"d-flex","justify-content-between"],["type","submit",1,"btn","btn-primary","btn-block","ms-3",3,"click"],["name","modelForm"],["modelForm","ngForm"],[1,"table-responsive-sm"],[1,"table"],[4,"ngIf"],[1,"d-flex","justify-content-center"],[4,"ngFor","ngForOf"],[2,"text-align","end"],["type","button",1,"btn","btn-primary","me-4",3,"click"],["type","button",1,"btn","btn-sm","btn-danger",3,"click"],["role","status",1,"spinner-border"],["id","loading",1,"sr-only"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div")(7,"h5"),t._uU(8,"Trip Plans "),t.qZA()(),t.TgZ(9,"div")(10,"a")(11,"button",6),t.NdJ("click",function(){return e.addTripPlan()}),t._uU(12," + Add New"),t.qZA()()()(),t.TgZ(13,"form",7,8)(15,"div",9)(16,"table",10)(17,"thead")(18,"tr")(19,"th"),t._uU(20,"Name"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Description"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Cost"),t.qZA(),t._UZ(25,"th"),t.qZA()(),t.YNc(26,N,3,3,"tbody",11),t.qZA(),t.TgZ(27,"div",1)(28,"div",2)(29,"div",12),t.YNc(30,Q,3,0,"div",11),t.qZA()()()()()()()()()()),2&i&&(t.xp6(26),t.Q6J("ngIf",0==e.showSpinner),t.xp6(4),t.Q6J("ngIf",1==e.showSpinner))},dependencies:[s._Y,s.JL,s.F,l.sg,l.O5,l.Ov],encapsulation:2});const L=["fileInput"];function D(n,i){if(1&n&&(t.TgZ(0,"div",27),t._UZ(1,"img",28),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("src",e.tripPlanImage,t.LSH)}}function k(n,i){1&n&&(t.TgZ(0,"div",29),t._uU(1," Saved successfully! "),t.qZA())}class f{constructor(i,e){this.tripplanService=i,this.router=e,this.planName="",this.description="",this.base64textString="",this.showStatusMessage=!1,this.tripplansuccessflag=!1,this.tripPlanMode=""}ngOnInit(){this.tripPlanObject=this.tripplanService.sharedTripPlanObject,this.tripPlanMode=this.tripplanService.sharedTripPlanMode,null==this.tripPlanObject&&(this.tripPlanObject={id:0,name:"",description:"",days:0,cost:0,members:0,image:""}),"ADD"==this.tripPlanMode?this.clearFields():this.tripPlanImage=T.N.baseUrl+"Resources/images/"+this.tripPlanObject.image}AddTripPlan(){let i;console.log("selected trip plan id:"+this.tripPlanObject.id),i={id:this.tripPlanObject.id,name:this.tripPlanObject.name,description:this.tripPlanObject.description,days:this.tripPlanObject.days,cost:this.tripPlanObject.cost,members:1,image:this.base64textString},this.tripplanService.InsertTripPlans(i).subscribe(e=>{console.log("2"),console.log(e),this.showStatusMessage=!0},e=>{console.log(e)}),this.tripplansuccessflag=!0,"ADD"==this.tripPlanMode&&this.clearFields()}clearFields(){this.tripPlanObject.name="",this.tripPlanObject.description="",this.tripPlanObject.cost=0,this.tripPlanObject.days=0,this.InputVar.nativeElement.value=""}onFileChanges(i){if(this.selectedFile=i.target.files[0],console.log("selected file:"+i.target.files[0]),this.selectedFile){var e=new FileReader;e.onload=this._handleReaderLoaded.bind(this),e.readAsBinaryString(this.selectedFile)}}_handleReaderLoaded(i){var e=i.target.result;this.base64textString=btoa(e)}}f.\u0275fac=function(i){return new(i||f)(t.Y36(c),t.Y36(d.F0))},f.\u0275cmp=t.Xpm({type:f,selectors:[["ng-component"]],viewQuery:function(i,e){if(1&i&&t.Gf(L,5),2&i){let o;t.iGM(o=t.CRH())&&(e.InputVar=o.first)}},decls:49,vars:6,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],["name","modelForm"],["modelForm","ngForm"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","col-12"],[1,"mt-3"],[1,"form-group"],[1,"mt-2","col-md-12"],["id","plan-input","name","planname","required","","rows","3","placeholder","",1,"form-control",3,"ngModel","ngModelChange"],["id","des-input","name","catdes","required","","rows","3","placeholder","",1,"form-control",3,"ngModel","ngModelChange"],["id","days-input","name","days","required","","rows","1","placeholder","",1,"form-control",3,"ngModel","ngModelChange"],["id","cost-input","name","cost","required","","rows","1","placeholder","",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","mt-4"],[1,"col-md-4"],[1,"input-group"],[1,"custom-file"],["type","file","accept","image","id","fileInput",1,"custom-select",3,"change"],["fileInput",""],[1,"col-md-3"],["class","img-preview p-2",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","button","routerLink","/tripplans/tripplans",1,"btn","px-12","me-3","btn-light","btn-block"],["type","button",1,"btn","btn-primary","px-5","btn-block",3,"click"],["class","alert alert-success mt-3","role","alert",4,"ngIf"],[1,"img-preview","p-2"],[1,"img-fluid",3,"src"],["role","alert",1,"alert","alert-success","mt-3"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5"),t._uU(6,"Trip plan"),t.qZA(),t.TgZ(7,"form",5,6)(9,"div",1)(10,"div",7)(11,"h6",8),t._uU(12,"Name"),t.qZA(),t.TgZ(13,"div",9)(14,"div",10)(15,"textarea",11),t.NdJ("ngModelChange",function(a){return e.tripPlanObject.name=a}),t.qZA()()(),t.TgZ(16,"h6",8),t._uU(17,"Description"),t.qZA(),t.TgZ(18,"div",9)(19,"div",10)(20,"textarea",12),t.NdJ("ngModelChange",function(a){return e.tripPlanObject.description=a}),t.qZA()()(),t.TgZ(21,"h6",8),t._uU(22,"Days"),t.qZA(),t.TgZ(23,"div",9)(24,"div",10)(25,"textarea",13),t.NdJ("ngModelChange",function(a){return e.tripPlanObject.days=a}),t.qZA()()(),t.TgZ(26,"h6",8),t._uU(27,"Cost"),t.qZA(),t.TgZ(28,"div",9)(29,"div",10)(30,"textarea",14),t.NdJ("ngModelChange",function(a){return e.tripPlanObject.cost=a}),t.qZA()()(),t.TgZ(31,"div",15)(32,"div",16)(33,"h6",8),t._uU(34,"Upload Image"),t.qZA(),t.TgZ(35,"div",17)(36,"div",18)(37,"input",19,20),t.NdJ("change",function(a){return e.onFileChanges(a)}),t.qZA()()(),t.TgZ(39,"small"),t._uU(40,"File Supprted : jpg,png"),t.qZA()(),t.TgZ(41,"div",21),t.YNc(42,D,2,1,"div",22),t.qZA()()()(),t.TgZ(43,"div",23)(44,"button",24),t._uU(45,"Back"),t.qZA(),t.TgZ(46,"button",25),t.NdJ("click",function(){return e.AddTripPlan()}),t._uU(47,"Save"),t.qZA()()(),t.YNc(48,k,2,0,"div",26),t.qZA()()()()()),2&i&&(t.xp6(15),t.Q6J("ngModel",e.tripPlanObject.name),t.xp6(5),t.Q6J("ngModel",e.tripPlanObject.description),t.xp6(5),t.Q6J("ngModel",e.tripPlanObject.days),t.xp6(5),t.Q6J("ngModel",e.tripPlanObject.cost),t.xp6(12),t.Q6J("ngIf","EDIT"==e.tripPlanMode),t.xp6(6),t.Q6J("ngIf",1==e.tripplansuccessflag))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.On,s.F,d.rH,l.O5],encapsulation:2});const Y=[{path:"",data:{title:"Trips "},children:[{path:"",pathMatch:"full",redirectTo:"tripplans"},{path:"tripplans",component:_,data:{title:"Trip plans"}},{path:"tripplan",component:f,data:{title:"Trip plan"}},{path:"activities",component:h,data:{title:"Activities"}},{path:"activity",component:v,data:{title:"Activity"}}]}];class m{}m.\u0275fac=function(i){return new(i||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[d.Bz.forChild(Y),d.Bz]});class u{}u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[s.u5,m,l.ez]})}}]);